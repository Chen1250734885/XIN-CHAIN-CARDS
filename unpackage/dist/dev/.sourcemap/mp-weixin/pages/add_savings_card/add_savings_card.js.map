{"version":3,"sources":["uni-app:///main.js",null,"webpack:///C:/Users/chenwei/Desktop/鑫琏卡/pages/add_savings_card/add_savings_card.vue?ae31","webpack:///C:/Users/chenwei/Desktop/鑫琏卡/pages/add_savings_card/add_savings_card.vue?8d7c","webpack:///C:/Users/chenwei/Desktop/鑫琏卡/pages/add_savings_card/add_savings_card.vue?2f55","uni-app:///pages/add_savings_card/add_savings_card.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;;;AAGA;AACA,8H,8FAHA;AACAA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC,CAGAC,UAAU,CAACC,yBAAD,CAAV,C;;;;;;;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAA;AAA6H;AAC7H;AACoE;AACL;;;AAG/D;AACoL;AACpL,gBAAgB,6LAAU;AAC1B,EAAE,sFAAM;AACR,EAAE,2FAAM;AACR,EAAE,oGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,+FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAqrB,CAAgB,0sBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC8KzsB;AACA,MADA,kBACA;AACA;AACA,oBADA;AAEA,sBAFA;AAGA,oBAHA;AAIA,sBAJA;AAKA,qBALA;AAMA,qBANA;AAOA,kCAPA;;AASA,GAXA;AAYA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAvBA;AAwBA;AACA,wBADA,EAxBA;;AA2BA;AACA,kBADA,4BACA;AACA;AACA;AACA,KAJA;AAKA,kBALA,0BAKA,IALA,EAKA;AACA;AACA,mCADA;AAEA,KARA;;AAUA,UAVA,kBAUA,WAVA,EAUA,IAVA,EAUA;AACA;AACA;AACA,qDADA,EACA;AACA,yBADA,EADA;AAGA,QAHA;AAIA;AACA;AACA;AACA;AACA,OARA;;AAUA,KAtBA;AAuBA;AACA,WAxBA,mBAwBA,CAxBA,EAwBA;AACA;AACA;AACA;AACA,0DADA,EACA;AACA,4BADA,EADA;AAGA;AACA;AACA;AACA;AACA;AACA,uBADA;AAEA,wCAFA;AAGA,6BAHA;AAIA,+BAJA;AAKA;AACA;AACA;AACA,eAFA,MAEA;AACA;AACA;AACA,aAXA;;AAaA;AACA,OArBA;;AAuBA,KAlDA;AAmDA,aAnDA,uBAmDA;AACA;AACA;AACA,gBADA,EACA;AACA,gCAFA,EAEA;AACA,6BAHA,EAGA;AACA;AACA;AACA;AACA;AACA,sEADA,EACA;AACA,sCAFA;AAGA,yBAHA;AAIA;AACA,4BADA;AAEA,6BAFA,EAJA;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA,aAdA;;AAgBA,SAvBA;;AAyBA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAtIA;AAuIA,UAvIA,oBAuIA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,wDADA;AAEA;AACA,kCADA;AAEA,oCAFA;AAGA,qCAHA;AAIA,kCAJA;AAKA,2BALA,EAFA;;AASA,UATA;AAUA;AACA;AACA;AACA;AACA,WAFA,EAEA,GAFA;;AAIA,SAhBA;;AAkBA;AACA,KA/JA;AAgKA,iBAhKA,yBAgKA,GAhKA,EAgKA;AACA;AACA;AACA;AACA;AACA,KArKA,EA3BA,E","file":"pages/add_savings_card/add_savings_card.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/add_savings_card/add_savings_card.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./add_savings_card.vue?vue&type=template&id=0fc23806&\"\nvar renderjs\nimport script from \"./add_savings_card.vue?vue&type=script&lang=js&\"\nexport * from \"./add_savings_card.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\Work_Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/add_savings_card/add_savings_card.vue\"\nexport default component.exports","export * from \"-!D:\\\\Work_Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\Work_Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\Work_Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\Work_Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\Work_Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Work_Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./add_savings_card.vue?vue&type=template&id=0fc23806&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\Work_Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Work_Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\Work_Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Work_Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Work_Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./add_savings_card.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\Work_Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Work_Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\Work_Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Work_Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Work_Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./add_savings_card.vue?vue&type=script&lang=js&\"","<template>\n  <gracePage :customHeader=\"false\">\n    <view slot=\"gBody\">\n      <view style=\"margin-top: 35rpx\">\n        <!-- reto('/pages/issuer_selection/issuer_selection?banck=储蓄卡') -->\n        <view\n          @tap=\"xuanzefakahang\"\n          class=\"grace-rows grace-flex-vcenter\"\n          style=\"\n            width: 750rpx;\n            height: 100rpx;\n            background: rgba(255, 255, 255, 1);\n          \"\n        >\n          <text\n            style=\"\n              margin-left: 28rpx;\n              font-size: 30rpx;\n              font-weight: 400;\n              color: rgba(51, 51, 51, 1);\n            \"\n            >发卡银行：</text\n          >\n          <text\n            class=\"grace-ellipsis\"\n            style=\"\n              position: relative;\n              left: 70rpx;\n              font-size: 24rpx;\n              font-weight: 400;\n              color: rgba(153, 153, 153, 1);\n            \"\n            >{{ fakahangname != \"\" ? fakahangname : \"请选择发卡行\" }}</text\n          >\n          <image\n            src=\"../../static/jiantou.png\"\n            style=\"\n              position: absolute;\n              left: 650rpx;\n              width: 20rpx;\n              height: 35rpx;\n            \"\n          ></image>\n        </view>\n      </view>\n      <view v-show=\"fakahangname\">\n        <view\n          class=\"grace-flex-center\"\n          style=\"width: 750rpx; margin-top: 40rpx\"\n          @tap=\"getIDCard()\"\n        >\n          <view>\n            <image\n              :src=\"\n                id_card_img.length > 0\n                  ? id_card_img\n                  : '../../static/chuxukatu.png'\n              \"\n              style=\"width: 544rpx; height: 328rpx\"\n            ></image>\n          </view>\n        </view>\n\n        <view\n          @tap=\"getIDCard()\"\n          class=\"grace-rows grace-flex-center\"\n          style=\"margin: 25rpx 0\"\n        >\n          <image\n            src=\"../../static/xiangji.png\"\n            style=\"width: 40rpx; height: 40rpx\"\n          ></image>\n          <text\n            style=\"\n              margin-left: 20rpx;\n              font-size: 24rpx;\n              font-weight: 400;\n              color: rgba(51, 51, 51, 1);\n            \"\n            >{{ xiangjishuoming }}</text\n          >\n        </view>\n      </view>\n      <view style=\"margin-top: 1rpx\">\n        <view\n          class=\"grace-rows grace-flex-vcenter\"\n          style=\"\n            width: 750rpx;\n            height: 100rpx;\n            background: rgba(255, 255, 255, 1);\n          \"\n        >\n          <!-- <text style=\"margin-left: 35rpx; font-size:28rpx;font-weight:400;color:rgba(51,51,51,1);\">储蓄卡卡号：</text> -->\n          <text\n            style=\"\n              margin-left: 28rpx;\n              font-size: 30rpx;\n              font-weight: 400;\n              color: rgba(51, 51, 51, 1);\n            \"\n            >储蓄卡卡号：</text\n          >\n          <input\n            v-model=\"chuxukahao\"\n            placeholder=\"请输入储蓄卡号\"\n            style=\"margin-left: 30rpx; width: 500rpx; font-size: 24rpx\"\n            @blur=\"jianche\"\n          />\n        </view>\n        <!-- 储蓄卡卡号与预留电话字体大小不一致 -->\n        <view\n          class=\"grace-rows grace-flex-vcenter\"\n          style=\"\n            margin-top: 2rpx;\n            width: 750rpx;\n            height: 100rpx;\n            background: rgba(255, 255, 255, 1);\n          \"\n        >\n          <text\n            style=\"\n              margin-left: 28rpx;\n              font-size: 30rpx;\n              font-weight: 400;\n              color: rgba(51, 51, 51, 1);\n            \"\n            >预留电话：</text\n          >\n          <input\n            v-model=\"yuliudianhua\"\n            placeholder=\"请输入银行预留手机号码\"\n            style=\"margin-left: 60rpx; width: 500rpx; font-size: 24rpx\"\n          />\n        </view>\n\n        <view style=\"margin-top: 10rpx; margin-left: 30rpx\">\n          <text\n            style=\"\n              font-size: 26rpx;\n              font-weight: 400;\n              color: rgba(153, 153, 153, 1);\n            \"\n            >*仅支持添加本人名下储蓄卡</text\n          >\n        </view>\n      </view>\n      <view>\n        <button\n          @tap=\"submit\"\n          style=\"\n            margin-top: 70rpx;\n            width: 500rpx;\n            height: 90rpx;\n            background: #1678ff;\n            box-shadow: 0px 2rpx 5rpx 0px rgba(67, 67, 67, 0.3);\n            border-radius: 20rpx;\n            font-size: 32rpx;\n            font-weight: 400;\n            color: rgba(255, 255, 255, 1);\n            line-height: 90rpx;\n          \"\n        >\n          确认\n        </button>\n      </view>\n    </view>\n  </gracePage>\n</template>\n\n<script>\n// #ifdef APP-PLUS\nconst card = uni.requireNativePlugin('DC-CardRecognize');\n// #endif\nimport gracePage from \"../../graceUI/components/gracePage.vue\";\nexport default {\n  data () {\n    return {\n      fakahangid: '',\n      fakahangname: '',\n      chuxukahao: '',\n      yuliudianhua: '',\n      card_img_id: '',\n      id_card_img: '',\n      xiangjishuoming: '请点击卡片上传图片'\n    }\n  },\n  onLoad: function (opt) {\n    // #ifdef APP-PLUS\n    this.xiangjishuoming = '可点击卡面拍照识别'\n    // #endif\n    // console.log(opt);\n    // if ( ! this.isEmptyObject(opt)){\n    // \tconsole.log(opt.id);\n    // \tthis.fakahangid=opt.id,\n    // \tthis.fakahangname=opt.name\n    // }\n    // console.log(this.fakahangname);\n  },\n  components: {\n    gracePage\n  },\n  methods: {\n    xuanzefakahang () {\n      uni.$once('xuanzefakahang', this.querenfakahang);\n      this.Goto('/pages/issuer_selection/issuer_selection?type=2');\n    },\n    querenfakahang (data) {\n      this.fakahangid = data.id,\n        this.fakahangname = data.name\n    },\n\n    tupian (file_base64, path) {\n      var vm = this;\n      vm.req.post(\n        vm.lochost + '/mytrunk/uploadfile/base64upfile', {\n        file: file_base64\n      }, {},\n        function (res) {\n          vm.id_card_img = res.data[0].quan_path;\n          vm.card_img_id = res.data[0].id;\n          console.log(res);\n        }\n      )\n    },\n    // 检测卡号\n    jianche (e) {\n      var value = e.detail.value\n      var vm = this\n      vm.req.mypost(\n        vm.lochost + '/index/index?method=testing_bank_card', {\n        bank_card_num: value\n      }, function (res) {\n        console.log(res);\n        // return\n        if (res.data.type !== 'DC' || res.data.code == 200) {\n          uni.showModal({\n            title: '提示',\n            content: '请核实该卡号是否有误或是否为储蓄卡',\n            showCancel: false,\n            confirmText: '我知道了',\n            success: function (res) {\n              if (res.confirm) {\n                console.log('用户点击确定');\n              } else if (res.cancel) {\n                console.log('用户点击取消');\n              }\n            }\n          })\n        }\n      }\n      )\n    },\n    getIDCard () {\n      var vm = this\n      uni.chooseImage({\n        count: 1, //默认9\n        sizeType: ['compressed'], //可以指定是原图还是压缩图，默认二者都有\n        sourceType: ['album'], //从相册选择\n        success: function (res) {\n          console.log(res);\n          var tempFilePaths = res.tempFilePaths;\n          uni.uploadFile({\n            url: 'https://m.xliank.com/api/Upload/user_upload_picture', //仅为示例，非真实的接口地址\n            filePath: tempFilePaths[0],\n            name: 'image',\n            formData: {\n              'file_type': 2,\n              'name': '0.png',\n            },\n            success: (uploadFileRes) => {\n              console.log(uploadFileRes);\n              const res1 = (new Function(\"return \" + uploadFileRes.data))();\n              console.log(res1);\n              vm.id_card_img = res1.data.img_url_whole;\n              vm.card_img_id = res1.data.img_url;\n            }\n          });\n        }\n      });\n      // if(this.fakahangid===''){\n      // \tthis.msg_show('请先选择发卡行喔！')\n      // }else{\n      // // #ifdef APP-PLUS\n      // var vm = this;\n      // card.startRecognize({\n      // \tmaskType: \"BankCard\"\n      // }, result => {\n      // \tconsole.log(result.path)\n      // \tthis.chuxukahao = result.bank_card_number;\n      // \tconst bitmapT = new plus.nativeObj.Bitmap(\"test\"); //test标识随便取\n      // \t// 从本地加载Bitmap图片\n      // \t//result.path:ocr识别返回的路径\n      // \tif (result.path) {\n      // \t\tbitmapT.load(result.path, function() {\n      // \t\t\tconsole.log('加载图片成功');\n      // \t\t\tconst base64 = bitmapT.toBase64Data();\n      // \t\t\t// base4:已转为base64的图片\n      // \t\t\tconst file_base64 = {\n      // \t\t\t\tname: 'pic.jpg',\n      // \t\t\t\tbase64: base64\n      // \t\t\t};\n      // \t\t\tvm.tupian(file_base64, result.path);\n      // \t\t\tbitmapT.clear();\n      // \t\t}, function(e) {\n      // \t\t\tconsole.log('加载图片失败：' + JSON.stringify(e));\n      // \t\t});\n      // \t}\n      // \tconsole.log(JSON.stringify(result));\n      // });\n      // // #endif\n      // // #ifndef APP-PLUS\n      // var vm = this;\n      // uni.chooseImage({\n      //     count: 1, //默认9\n      //     sizeType: ['compressed'], //可以指定是原图还是压缩图，默认二者都有\n      //     sourceType: ['album','camera'], //从相册选择\n      //     success: function (res) {\n      // \t\tvar tempFilePaths=res.tempFilePaths;\n      // \t\t uni.uploadFile({\n      // \t\t            url:vm.lochost+'/mytrunk/uploadfile/upfile', //仅为示例，非真实的接口地址\n      // \t\t            filePath: tempFilePaths[0],\n      // \t\t            name: 'file',\n      // \t\t            formData: {\n      // \t\t                'file': 'pic.jpg'\n      // \t\t            },\n      // \t\t            success: (uploadFileRes) => {\n      // \t\t                const res1 = JSON.parse(uploadFileRes.data);\n      // \t\t\t\t\t\tvm.id_card_img = res1.data[0].quan_path;\n      // \t\t\t\t\t\tvm.card_img_id = res1.data[0].id;\n      // \t\t            }\n      // \t\t        });\n      //     }\n      // });\n      // // #endif\n      // }\n    },\n    submit () {\n      if (this.fakahangid === '' || this.chuxukahao === '' || this.yuliudianhua === '') {\n        this.msg_show('请将信息填写完整')\n      } else {\n        var vm = this;\n        this.req.post(\n          this.lochost + '/index/index?method=add_savings',\n          {\n            bank_id: this.fakahangid,\n            bank_card: this.chuxukahao,\n            bank_tel: this.yuliudianhua,\n            sms_code: 'bank_binding',\n            bank_card_img: ''\n          },\n          {},\n          function (res) {\n            vm.msg_show(res.msg)\n            setTimeout(function () {\n              vm.Back(1);\n            }, 500)\n\n          }\n        )\n      }\n    },\n    isEmptyObject (obj) {\n      for (var key in obj) {\n        return false;\n      }\n      return true;\n    }\n  }\n}\n</script>\n\n<style>\n</style>\n"],"sourceRoot":""}